<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <title>Room Created</title>
</head>

<body>
  <h1 id="currRooms"></h1>
  <script src="https://www.gstatic.com/firebasejs/3.7.4/firebase.js"></script>
  <script>
    // Initialize Firebase
    var config = {
      apiKey: "AIzaSyBjxttr82927G5x1_C-MPvJRQMYKmQ4d3g",
      authDomain: "spies-dcdf2.firebaseapp.com",
      databaseURL: "https://spies-dcdf2.firebaseio.com",
      projectId: "spies-dcdf2",
      storageBucket: "spies-dcdf2.appspot.com",
      messagingSenderId: "989041921995"
    };
    firebase.initializeApp(config);
    var allRooms = document.getElementById('allRooms');

    //finds the room we're in by looping through all the rooms added until it
    //reaches the one most recently added, then sets the currRooms text to that room
    function findRooms(s) {
      console.log(s);
      for (x in s) {
        console.log(x);
        currRooms.innerText = JSON.stringify(x).substring(1, JSON.stringify(x).length - 1);
      }
    }
    var dbRef = firebase.database().ref().child('rooms');
    //everytime the pave loads, this calls findRooms
    dbRef.once('value', function(snapshot) {
      findRooms(snapshot.val());
    });
  </script>
</body>

</html>
